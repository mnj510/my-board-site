# 데이터 저장 및 접근 가이드

## ✅ 현재 상태

### 데이터 저장 위치
- **NAS 경로**: `/Volumes/site/data/database.db`
- **실제 저장 위치**: Synology NAS의 `site` 공유 폴더 내 `data` 폴더
- **저장 상태**: ✅ 정상 저장 중

### 확인 방법
```bash
# NAS에 저장된 데이터베이스 확인
ls -lh /Volumes/site/data/database.db

# 데이터베이스 내용 확인
sqlite3 /Volumes/site/data/database.db "SELECT * FROM posts;"
```

## ⚠️ 중요한 점

### 현재 동작 방식
1. **서버 사이드 저장**: 모든 데이터는 서버가 실행되는 컴퓨터의 NAS 마운트 경로에 저장됩니다
2. **단일 데이터베이스**: 하나의 데이터베이스 파일만 사용하므로, 서버를 한 곳에서만 실행해야 합니다

### 어디서 누가 열어도 동일한 데이터를 보려면

**방법 1: 서버를 한 곳에서만 실행 (권장)**

1. **서버 실행 컴퓨터**: Mac mini (현재)
   - NAS 마운트: `/Volumes/site`
   - 서버 실행: `npm run dev`
   - 네트워크 주소: `http://[서버IP]:3000`

2. **다른 컴퓨터/기기에서 접속**:
   - 같은 네트워크에 연결
   - 브라우저에서 `http://[서버IP]:3000` 접속
   - 예: `http://192.168.219.xxx:3000`

**방법 2: 서버를 항상 실행하도록 설정**

서버를 백그라운드에서 항상 실행하도록 설정하면, 언제든지 접속 가능합니다.

## 🔧 설정 방법

### 1. 서버 IP 주소 확인

터미널에서 다음 명령어로 서버 IP 확인:
```bash
ifconfig | grep "inet " | grep -v 127.0.0.1
```

### 2. 방화벽 설정 (필요시)

macOS 방화벽에서 포트 3000 허용:
1. 시스템 설정 > 네트워크 > 방화벽
2. 옵션 > 포트 3000 허용 추가

### 3. 다른 기기에서 접속

같은 네트워크(Wi-Fi)에 연결된 다른 기기에서:
```
http://[서버IP주소]:3000
```

예시:
- 서버 IP가 `192.168.219.100`이면
- 다른 기기에서 `http://192.168.219.100:3000` 접속

## 📊 데이터 동기화 확인

### 모든 기기에서 동일한 데이터를 보는지 확인:

1. **서버 컴퓨터에서**:
   - 게시글 작성
   - 댓글 작성

2. **다른 기기에서**:
   - 같은 주소로 접속
   - 작성한 게시글과 댓글이 보이는지 확인

### 문제 해결

**다른 기기에서 데이터가 안 보일 때:**
1. 서버가 실행 중인지 확인
2. 같은 네트워크에 연결되어 있는지 확인
3. 서버 IP 주소가 올바른지 확인
4. 방화벽 설정 확인

**데이터가 다를 때:**
- 서버를 여러 곳에서 실행하고 있지 않은지 확인
- 각 컴퓨터마다 다른 데이터베이스를 사용하고 있을 수 있음
- 서버를 한 곳에서만 실행해야 함

## 🚀 프로덕션 배포 (선택사항)

항상 접속 가능하게 하려면:

1. **서버를 항상 실행**: 
   - `pm2` 또는 `forever` 사용
   - 또는 시스템 서비스로 등록

2. **고정 IP 설정**:
   - 라우터에서 서버 컴퓨터에 고정 IP 할당

3. **도메인 연결** (선택사항):
   - DDNS 서비스 사용
   - 또는 고정 IP 사용

## ✅ 확인 체크리스트

- [x] NAS에 데이터베이스 파일 저장됨
- [x] 환경 변수 설정 완료
- [ ] 서버 IP 주소 확인
- [ ] 다른 기기에서 접속 테스트
- [ ] 데이터 동기화 확인

